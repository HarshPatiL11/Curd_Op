import React, { useState } from 'react';
import axios from 'axios';

const UpdatingApi = () => {
    const data = { fname: "", lname: "", email: "", pnumber: "" };
    const [userdata, setUserData] = useState(data);
    const [userType, setUserType] = useState("newUser"); // State to manage selected radio button

    const handleChange = (e) => {
        const { name, value } = e.target;
        if (name === 'userType') {
            setUserType(value);
        } else {
            setUserData({ ...userdata, [name]: value });
        }
    };

    const handleSubmit = (e) => {
        e.preventDefault();
        axios.post('https://jsonplaceholder.typicode.com/users', userdata)
            .then((response) => {
                console.log(response);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    };

    return (
        <div>
            <h1>Update DataBase</h1>
            <div className='formDisplay'>
                <input
                    type='radio'
                    name='userType'
                    value='newUser'
                    checked={userType === 'newUser'}
                    onChange={handleChange}
                /> New User
                <input
                    type='radio'
                    name='userType'
                    value='update'
                    checked={userType === 'update'}
                    onChange={handleChange}
                /> Update
                {(userType === 'newUser' || userType === 'update') && (
                    <>
                        <label>Name</label><br/>
                        <input name='fname' type='text' value={userdata.fname} onChange={handleChange}/>
                        <label>Surname</label><br/>
                        <input name='lname' type='text' value={userdata.lname} onChange={handleChange}/>
                        <label>Enter Email</label><br/>
                        <input name='email' type='email' value={userdata.email} onChange={handleChange}/>
                        <label>Enter Phone number</label><br/>
                        <input name='pnumber' type='number' value={userdata.pnumber} onChange={handleChange}/><br/><br/>
                        <button onClick={handleSubmit}>Submit button</button>
                    </>
                )}
            </div>
        </div>
    );
};

export default UpdatingApi;
